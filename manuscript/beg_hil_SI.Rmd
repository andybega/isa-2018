---
title: "SI"
author: ""
date: "`r format(Sys.Date(), '%d %B %Y')`"
output: 
  pdf_document:
    keep_tex: yes
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library("dplyr")
library("tidyr")
library("readr")
library("stringr")
```

```{r}
cy <- read_rds("../output/cy.rds")
```

For additional robustness checks, we considered the following indicators:

- Media freedom, from Whitten-Woodring and Van Belle, 2015, "The Correlates of Media Freedom", *PSRM*, via http://faculty.uml.edu/Jenifer_whittenwoodring/MediaFreedomData_000.aspx. Per the authors recommendations we collapsed the 3-valued media freedom indicator into a binary "functionally free" and "not free" version. 
- IGO membership as an indicator of political globalization, from the COW IGO state unit dataset. 
- Linear and squared year trends
- Human rights organization membership (`hro_n`) and secretariat locations (`hro_secloc`). From Murdie and Davis 2012 "Shaming and Blaming", ISQ, http://amandamurdie.org/research.html, where the original variable names are `hrfilled` and `HRsecretariatlocation`.
- Trade as % of GDP as an economic globalization indicator. From the World Bank WDI. 

The trade and HRO data contain missing values. The number of observations in a model depend on the particular combination of the 3 indicators impacted in a given specification, such that:

```{r}
cy %>%
  select(hro_n, hro_secloc, NE.TRD.GNFS.ZS) %>%
  mutate_all(is.na) %>%
  mutate(
    None = FALSE,
    `hro_n, hro_secloc` = hro_n | hro_secloc,
    `hro_n, NE.TRD.GNFS.ZS` = hro_n | NE.TRD.GNFS.ZS,
    `hro_n, hro_secloc, NE.TRD.GNFS.ZS` = hro_n | hro_secloc | NE.TRD.GNFS.ZS
    ) %>%
  summarize_all(~(n() - sum(.))) %>%
  gather(Variables, N) %>%
  mutate(Fraction = N / nrow(cy) * 100) %>%
  arrange(desc(N)) %>%
  knitr::kable(digits = 0)
```

# Sensitivity analysis

The conduct the robustness / sensitivity analysis, we suggest the "reasonable specification" approach outlined in ...

They suggest listing a set of reasonable model and specification choices, and the alternatives available for each. In a typical robustness check one would examine a limited number of these alternative choices. They suggest to instead examine all possible combinations of reasonable choices. In spirit this is a restricted version of extreme bounds analysis, that seeks to eliminate unreasonable specifications. For example it makes no sense to estimate a model including both raw and logged GDP, rather we would only want to examine one at a time. 

We included the following choices in our sensitivity analysis:

- Model type: 2 alternatives; either a regular Poisson count model or a Poisson count model with random country intercepts
- Base terms: 2 alternatives; intercept(s) only or the basic controls, as discussed in the main paper. 
- Media freedom: 2 alternatives; no control or the global media freedom index
- Political globalization: 3 alternatives; no control or a count of HRO membership or a count of HRO secretariats located in a country
- Year trend: 3 alternatives; no trend, linear trend, or squared trend

Alltogether this represents 72 possible specifications. The one we report in the paper is a Poisson model with random country intercepts, includes the base control set, but does not include any other control variables. We examined each of the 72 specifications for each of the 14 variables of interest using each of the 3 dependent variables. 

## Specification plot intro

Each specification plot consists of two main elements. The plot panel on the top shows the coefficient estimates for a single variable of interest over a number of different specification on the x-axis. The points and lines show point estimates and 95\% confidence intervals; they are colored blue if the $p$ value is less than 0.05 and red otherwise. 

The second panel at the bottom shows details for each specification. All the way on the left are the labels for each specification choice; the elements from which one could choose are in the next column. Lastly in the plot are markers indication, for each specification on the $x$-axis, which specific choices were made for each specification. 

The specifications reported in the main paper are highlighted with the gray bars. 

\includegraphics{../output/figures-robustness/specplot-ccp_dueproc-itt_alleg_vtcriminal.png}

# List of all specification plots

```{r, results = 'asis'}
plots <- list.files("../output/figures-robustness", full.names = TRUE)

this_voi <- ""
for (fh in plots) {
  meta <- str_split(basename(fh), "-")[[1]]
  if (this_voi != meta[2]) {
    this_voi <- meta[2]
    cat(sprintf("\n## VOI: %s\n", this_voi))
  }
  cat("\n")
  cat(sprintf("\\includegraphics[height=4in]{%s}", fh))
  cat("\n")
}
```


